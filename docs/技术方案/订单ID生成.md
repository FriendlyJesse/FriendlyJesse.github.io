# 订单 ID 生成
生成订单号的方法可以根据系统的具体需求和架构选择合适的策略。以下是一些常见的订单ID生成方法：
## 数据库自增ID
这是最简单直接的方式，利用数据库表的自增字段作为订单ID。每当有新订单创建时，数据库会自动递增该字段值，确保ID的唯一性。然而，这种方法可能不适合分布式环境，因为不同节点可能无法保证ID的全局唯一性。分布式需要通过中间件先生成sequence作为ID。但自增ID容易被预测，可能引发安全问题。这种也不适合我们这种在未提交订单的时候生成订单ID。
## UUID（Universally Unique Identifier）
UUID是一种标准的、全局唯一的标识符，通常由32位十六进制数字组成，分为五部分，包括时间戳、机器标识、进程标识、随机数等。生成UUID可以确保在任何地方、任何时间产生的ID都不会重复。其优点是无需中央控制即可生成，适合分布式系统。但UUID较长，不易记忆，如果不在乎这个，是个不错的选择。
UUID不是自增的，不建议在 MYSQL 数据库中作索引使用，会影响索引的查询性能。

## 雪花ID（Snowflake ID）
雪花ID是一种基于时间序列的分布式ID生成算法，ID通常包含三部分：时间戳（毫秒级）、工作机器ID、序列号。这种设计兼顾了全局唯一性、趋势递增和高性能。时间戳保证了大致上的顺序，工作机器ID用于区分不同生成节点，序列号在节点内递增。雪花ID短小且易于排序，非常适合高并发场景。
有比较多的第三方库来实现，如Twitter的Snowflake、百度的UidGenerator、美团的Leaf等。这些服务封装了复杂的ID生成逻辑，对外提供简单易用的接口。系统只需调用接口即可获取唯一订单ID，非常适合大规模分布式系统的场景。
我的系统中，就打算使用雪花ID的生成算法来实现。
## 组合型ID
可以通过信息的组合生成订单号，如：

   - 时间戳+序列号：将当前时间（如精确到秒或毫秒）与一个本地递增序列号拼接，形成订单ID。这样ID既包含时间信息，也具有唯一性。
   - 用户ID+时间戳：将用户ID与下单时间组合，可以直观反映用户何时下的订单，但要注意用户ID本身可能包含敏感信息，需确保适当脱敏处理。
   - 业务代码+日期+序列号：对于多业务线或多租户的系统，可先用业务代码标识订单来源，再加上日期和内部序列号，确保同一业务线内ID的唯一性。
   - 结合业务特性和需求，将多种信息编码进订单ID中，例如：

生成订单ID的方法比较多，每个系统可以根据自己系统的特点来生成订单ID时，可以考虑以下因素：

- 性能：ID生成过程应尽量快且低延迟，特别是在高并发场景下。
- 可用性：ID生成服务应具备高可用性，避免因服务故障导致无法生成订单。
- 安全性：ID不应包含敏感信息，且不易被恶意猜测或攻击。
- 可读性：某些场景下，订单ID可能需要直接展示给用户或业务人员，此时可考虑采用具有一定可读性的编码方式（如包含日期信息）。
